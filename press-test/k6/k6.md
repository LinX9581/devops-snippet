## 官方文件 指標意義
https://k6.io/docs/using-k6/metrics/

## 參數
指令定義
k6 run hello-k6.js --vus 5 --iterations 15

也可直接寫在JS options
export let options = {
  vus: 10,
  duration: '30s',
};

## 測試型別
Smoke Testing   -> 盡可能用最少的資源去測試，只是為了測試出有沒有 error
Load testing    -> 主要是關注當前系統的配置，在多少 user 或 RPS 時，performance 是如何
Stress Testing  -> 測試系統的極限
Spike Testing   -> 測試 短時間大量流量
Soak Testing    -> 測試長時間的系統穩定

## install
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys C5AD17C747E3415A3642D57D77C6C491D6AC1D69
echo "deb https://dl.k6.io/deb stable main" | sudo tee /etc/apt/sources.list.d/k6.list
sudo apt-get update
sudo apt-get install k6

mkdir k6
cd k6
hello-k6.js

import http from 'k6/http';
import { sleep } from 'k6';

export default function () {
  http.get('https://test.k6.io');
  sleep(1);
}

k6 run hello-k6.js


# 測試結果
以下都是1台LB 4台VM

4c8g
30s 500  (O 
30s 1500 (X
30m long time concurrent 5000 cpu overloading

4c16g
30s 1500 (O
30s 2500 (X
30m long time concurrent 5000 cpu overloading

8c32g *4
30s 1500 (O
30s 2500 (O
30s 3500 (O
30s 4500 (O
30s 5500 (O
30m long time concurrent 5000 少部分 request fail 1.9%

# 8C32G * 5

30秒  3500
50m   4500
95%的人平均loading 2秒
0.99% fail

30S 5000 
30s/+200 -> 5800
95% 3秒內
fail 1.31%

30s 6000
30s/+200 -> 6800
95% 3.03S
3.49% fail

30s 7000
30s/+200 -> 7800
95% 4.13s
16.14% fail
